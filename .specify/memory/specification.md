# 兒童數位健康控制系統 - 產品規格文件

## 1. 專案概述

### 願景
建立一個幫助家長管理孩童數位裝置使用時間的完整解決方案，透過正向激勵機制（積分獎勵）取代單純的限制，培養孩子自主管理時間的能力，同時保護視力健康和促進親子互動。

### 目標
- **主要目標**：有效控制和管理兒童的螢幕使用時間
- **教育目標**：培養孩子的時間管理意識和自制力
- **激勵目標**：透過遊戲化機制讓時間管理變得有趣
- **家庭目標**：促進親子溝通，減少因使用3C產生的衝突
- **健康目標**：保護孩童視力，確保充足的戶外活動時間

### 非目標
- 不是間諜軟體或監控工具
- 不追蹤孩子的隱私內容（聊天記錄、照片等）
- 不是懲罰工具，而是正向引導系統
- 不支援破解或繞過其他 App 的限制
- 不收集非必要的個人資料

### 目標使用者
- **主要**：6-15歲兒童的家長
- **次要**：需要自我管理螢幕時間的青少年
- **地區**：台灣（初期）、華語地區（後期）

## 2. 使用者故事

### 家長視角

#### 故事 1：設定使用規則
**身為一位忙碌的家長**，我希望能夠：
- 為每個孩子設定不同的螢幕時間限制
- 區分平日和假日的不同規則
- 設定「禁用時段」（如睡眠時間、用餐時間）
- 為不同類型的 App 設定不同限制（遊戲 vs 教育）
- 快速調整規則（如考試週減少時間）

#### 故事 2：即時監控與控制
**身為關心孩子的家長**，我希望能夠：
- 即時看到孩子正在使用什麼 App
- 查看今日/本週的使用統計
- 緊急鎖定所有裝置（如該睡覺了）
- 收到超時提醒通知
- 遠端給予額外時間獎勵

#### 故事 3：獎勵管理
**身為想要激勵孩子的家長**，我希望能夠：
- 設定任務和對應的積分獎勵
- 創建自訂的獎勵項目
- 審核孩子的任務完成證明
- 看到孩子的積分使用歷史
- 設定獎勵兌換的審核流程

### 孩童視角

#### 故事 4：時間管理
**身為一個小學生**，我希望能夠：
- 清楚看到今天還能玩多久
- 收到時間快用完的提醒
- 知道什麼時候不能使用裝置
- 申請額外的使用時間
- 看到我的使用時間統計圖表

#### 故事 5：積分與任務
**身為想要獲得獎勵的孩子**，我希望能夠：
- 看到可以完成的任務清單
- 拍照上傳任務完成證明
- 即時看到獲得的積分
- 查看積分排行榜（和兄弟姐妹比較）
- 設定積分存錢目標

#### 故事 6：獎勵兌換
**身為努力賺積分的孩子**，我希望能夠：
- 瀏覽獎勵商城的所有商品
- 用積分兌換額外的螢幕時間
- 兌換實體獎勵（玩具、零食）
- 兌換特殊權限（選晚餐、晚睡等）
- 看到限時優惠和特別活動

## 3. 功能需求

### 3.1 時間控制核心功能

#### 基礎控制
- **每日使用限額**：設定每日總使用時間（分鐘）
- **時段控制**：設定可用/禁用時段
- **App 分類限制**：社交、遊戲、影片、教育分別設限
- **彈性調整**：臨時延長/縮短時間
- **裝置鎖定**：時間到自動鎖定/手動緊急鎖定

#### 進階控制
- **智慧排程**：根據課表自動調整
- **漸進式管理**：逐步減少使用時間
- **白名單模式**：只允許特定 App
- **專注模式**：學習時間只能用教育 App
- **家庭時間**：全家一起的無螢幕時間

### 3.2 積分系統

#### 積分獲取
- **每日任務**：刷牙、整理房間、運動等
- **學習任務**：完成作業、閱讀、練琴等
- **家事任務**：洗碗、倒垃圾、澆花等
- **特殊成就**：考試進步、比賽得獎等
- **自動積分**：準時睡覺、限時內完成等

#### 積分規則
- **任務定價**：不同任務不同積分
- **完成驗證**：拍照、家長確認、自動偵測
- **積分有效期**：可設定積分過期時間
- **防作弊機制**：重複任務冷卻時間
- **獎勵加成**：連續完成加成、特殊日加倍

### 3.3 獎勵商城

#### 虛擬獎勵
- **額外螢幕時間**：15/30/60 分鐘選項
- **App 解鎖**：暫時解鎖被限制的 App
- **延後睡覺時間**：延後 30 分鐘
- **跳過任務券**：免做一次家事

#### 實體獎勵
- **預設模板**：玩具、零食、書籍、文具
- **自訂獎勵**：家長自行上架商品
- **價格設定**：積分定價、限量設定
- **兌換流程**：申請→審核→發放

#### 特權獎勵
- **選擇晚餐**：決定今晚吃什麼
- **電影之夜**：選一部電影全家看
- **朋友聚會**：邀請朋友來玩
- **特殊活動**：遊樂園、看展覽等

### 3.4 統計與報表

#### 使用統計
- **時間分析**：每日/週/月使用趨勢
- **App 分析**：各 App 使用時長排名
- **時段分析**：使用高峰時段
- **對比分析**：和上週/上月比較

#### 任務統計
- **完成率**：各類任務完成情況
- **積分報表**：賺取和消費明細
- **成就追蹤**：達成的里程碑
- **排行榜**：家庭內排名

### 3.5 通知與提醒

#### 給家長
- **超時警告**：孩子即將/已經超時
- **任務完成**：需要審核確認
- **兌換申請**：孩子申請兌換獎勵
- **異常行為**：嘗試繞過限制

#### 給孩子
- **時間提醒**：剩餘 15/5 分鐘提醒
- **任務提醒**：每日任務提醒
- **積分通知**：獲得積分通知
- **獎勵通知**：兌換成功/新獎勵上架

## 4. 技術規格

### 4.1 系統架構

```
┌─────────────────────────────────────────────────────┐
│                     用戶端                           │
├──────────────────────┬──────────────────────────────┤
│   Vue 家長端 Web     │     Flutter 孩童端 App       │
│   - 管理介面         │     - 時間顯示              │
│   - 即時監控         │     - 任務系統              │
│   - 統計報表         │     - 獎勵商城              │
└──────────┬───────────┴──────────────┬──────────────┘
           │                          │
           ↓                          ↓
┌─────────────────────────────────────────────────────┐
│                 API Gateway                          │
│            (Express + Socket.io)                     │
└─────────────────────────────────────────────────────┘
           │                          │
           ↓                          ↓
┌──────────────────────┬──────────────────────────────┐
│    業務邏輯層        │       資料存儲層              │
│  - 認證服務          │   - PostgreSQL (主資料)       │
│  - 時間控制服務      │   - Redis (快取/Session)      │
│  - 積分服務          │   - File Storage (圖片)       │
│  - 通知服務          │                               │
└──────────────────────┴──────────────────────────────┘
           │                          │
           ↓                          ↓
┌─────────────────────────────────────────────────────┐
│              原生控制層（Native）                     │
├──────────────────────┬──────────────────────────────┤
│     Android          │          iOS                  │
│ - Accessibility      │   - Screen Time API           │
│ - Device Admin       │   - Family Controls           │
└──────────────────────┴──────────────────────────────┘
```

### 4.2 資料模型

```typescript
// 使用者
interface User {
  id: string
  email: string
  role: 'parent' | 'child'
  familyId: string
  profile: UserProfile
  createdAt: Date
}

// 時間規則
interface TimeRule {
  id: string
  childId: string
  dailyLimit: {
    weekday: number  // 分鐘
    weekend: number
  }
  blockedPeriods: TimePeriod[]
  appLimits: Map<AppCategory, number>
}

// 任務
interface Task {
  id: string
  familyId: string
  name: string
  description: string
  points: number
  category: TaskCategory
  recurring: boolean
  requireProof: boolean
  cooldown: number  // 小時
}

// 積分記錄
interface PointTransaction {
  id: string
  childId: string
  amount: number
  type: 'earn' | 'spend'
  reason: string
  taskId?: string
  rewardId?: string
  timestamp: Date
}

// 獎勵
interface Reward {
  id: string
  familyId: string
  name: string
  description: string
  cost: number
  type: 'virtual' | 'physical' | 'privilege'
  stock?: number
  imageUrl?: string
  autoApply: boolean
}

// 使用記錄
interface UsageRecord {
  id: string
  childId: string
  deviceId: string
  appName: string
  category: AppCategory
  startTime: Date
  duration: number  // 秒
  
}
```

### 4.3 API 端點

```yaml
# 認證
POST   /api/auth/register
POST   /api/auth/login
POST   /api/auth/refresh
POST   /api/auth/logout

# 家庭管理
GET    /api/family/members
POST   /api/family/invite
DELETE /api/family/members/:id

# 時間控制
GET    /api/rules/:childId
PUT    /api/rules/:childId
POST   /api/control/lock/:childId
POST   /api/control/unlock/:childId
POST   /api/control/extend/:childId

# 任務系統
GET    /api/tasks
POST   /api/tasks
PUT    /api/tasks/:id
POST   /api/tasks/:id/complete
POST   /api/tasks/:id/verify

# 積分系統
GET    /api/points/:childId/balance
GET    /api/points/:childId/history
POST   /api/points/transfer

# 獎勵商城
GET    /api/rewards
POST   /api/rewards
PUT    /api/rewards/:id
POST   /api/rewards/:id/redeem
POST   /api/rewards/:id/approve

# 統計報表
GET    /api/stats/usage/:childId
GET    /api/stats/tasks/:childId
GET    /api/stats/points/:childId

# WebSocket 事件
ws: device-online
ws: device-offline
ws: usage-update
ws: limit-exceeded
ws: task-completed
ws: points-earned
ws: reward-redeemed
ws: rules-updated
ws: instant-lock
```

## 5. UI/UX 設計

### 5.1 設計原則

#### 家長端（Vue Web）
- **專業簡潔**：商務風格，資訊密度適中
- **資料視覺化**：圖表直觀展示統計
- **快速操作**：常用功能一鍵到達
- **響應式設計**：支援手機、平板、桌面

#### 孩童端（Flutter App）
- **活潑有趣**：卡通風格，豐富動畫
- **簡單直觀**：大按鈕、清楚圖示
- **遊戲化元素**：成就、徽章、等級
- **正向回饋**：完成任務有慶祝動畫

### 5.2 配色方案

```css
/* 家長端配色 */
--primary: #409EFF;     /* 主色-科技藍 */
--success: #67C23A;     /* 成功-綠色 */
--warning: #E6A23C;     /* 警告-橘色 */
--danger: #F56C6C;      /* 危險-紅色 */
--info: #909399;        /* 資訊-灰色 */

/* 孩童端配色 */
--primary: #7C4DFF;     /* 主色-活潑紫 */
--secondary: #FF6B6B;   /* 次色-愉快紅 */
--accent: #4ECDC4;      /* 強調-青綠色 */
--reward: #FFD93D;      /* 獎勵-金黃色 */
--background: #F7F9FC;  /* 背景-淺藍灰 */
```

### 5.3 互動設計

#### 動畫效果
- **轉場動畫**：頁面切換流暢
- **微互動**：按鈕點擊回饋
- **載入動畫**：有趣的等待動畫
- **成就動畫**：任務完成慶祝效果

#### 聲音設計（孩童端）
- **操作音效**：按鈕點擊聲
- **提示音效**：時間提醒聲
- **獎勵音效**：獲得積分聲
- **成就音效**：任務完成慶祝聲

## 6. 成功指標

### 質化指標
- 家長感覺管理變輕鬆
- 孩子主動完成任務
- 親子衝突減少
- 孩子時間觀念提升
- 家庭氛圍改善

### 量化指標

#### 使用指標
- **日活躍用戶 (DAU)**：> 60%
- **週留存率**：> 70%
- **月留存率**：> 50%
- **平均使用時長**：家長 10 分鐘/天，孩子 30 分鐘/天

#### 功能指標
- **規則設定完成率**：> 90%
- **任務完成率**：> 60%
- **積分兌換率**：> 40%
- **裝置控制成功率**：> 95%

#### 健康指標
- **平均螢幕時間減少**：20-30%
- **戶外活動時間增加**：> 1 小時/天
- **睡眠時間達標率**：> 80%

## 7. 實作階段

### 階段 1：MVP（最小可行產品）- 4 週

#### 核心功能
- [x] 基礎認證系統（註冊/登入）
- [x] 家庭成員管理
- [x] 基本時間限制設定
- [x] Android Accessibility Service 整合
- [x] 簡單的時間顯示介面
- [x] WebSocket 即時通訊
- [x] 基礎通知系統

#### 交付標準
- 家長能設定每日使用時間
- 孩子能看到剩餘時間
- 時間到自動鎖定（Android）
- 基本的資料同步

### 階段 2：積分與任務系統 - 3 週

#### 新增功能
- [ ] 任務管理系統
- [ ] 積分計算邏輯
- [ ] 任務完成驗證
- [ ] 積分歷史記錄
- [ ] 基礎積分顯示
- [ ] 任務完成通知

#### 交付標準
- 家長能創建任務
- 孩子能完成任務獲得積分
- 積分即時更新顯示

### 階段 3：獎勵商城 - 3 週

#### 新增功能
- [ ] 獎勵商品管理
- [ ] 商城瀏覽介面
- [ ] 兌換流程
- [ ] 庫存管理
- [ ] 兌換歷史
- [ ] 虛擬獎勵自動生效

#### 交付標準
- 完整的商城功能
- 支援多種獎勵類型
- 流暢的兌換體驗

### 階段 4：進階控制與 iOS 支援 - 4 週

#### 新增功能
- [ ] iOS Screen Time 整合
- [ ] App 分類限制
- [ ] 時段控制
- [ ] 白名單/黑名單
- [ ] 裝置管理
- [ ] 家長控制面板優化

#### 交付標準
- iOS 基本支援
- 更精細的控制選項
- 跨平台同步

### 階段 5：統計與優化 - 3 週

#### 新增功能
- [ ] 使用統計報表
- [ ] 資料視覺化圖表
- [ ] 成就系統
- [ ] 排行榜
- [ ] 匯出報告
- [ ] 效能優化

#### 交付標準
- 完整的統計功能
- 直觀的資料呈現
- 系統效能達標

### 階段 6：進階功能 - 4 週

#### 新增功能
- [ ] AI 智慧建議
- [ ] 家庭行事曆整合
- [ ] 語音助手
- [ ] 多語言支援
- [ ] 深色模式
- [ ] 家長社群

#### 交付標準
- 差異化功能完成
- 使用體驗提升

## 8. 待決定事項

### 技術相關
- [ ] 是否使用付費的 MDM 服務？
- [ ] 是否需要自建推播服務？
- [ ] 資料備份策略？
- [ ] 是否支援離線同步？

### 商業模式
- [ ] 免費 vs 付費功能的界線？
- [ ] 訂閱定價策略？
- [ ] 是否提供家庭方案？
- [ ] 是否與教育機構合作？

### 功能範圍
- [ ] 是否支援 PC/Mac 控制？
- [ ] 是否加入社交功能？
- [ ] 是否支援智慧手錶？
- [ ] 是否整合第三方服務（Google Family Link）？

### 合規性
- [ ] 如何確保 COPPA 合規？
- [ ] 是否需要年齡驗證？
- [ ] 資料保留期限？
- [ ] 如何處理跨國資料傳輸？

## 9. 風險評估

### 技術風險
- **iOS 限制**：Screen Time API 功能受限
  - 緩解：提供詳細設定指南，考慮 MDM 方案
  
- **Android 碎片化**：不同版本行為不一致
  - 緩解：充分測試主流裝置，提供相容性列表

- **即時同步衝突**：多裝置同時修改
  - 緩解：實作 CRDT 或最後寫入優先策略

### 市場風險
- **競爭對手**：Google Family Link、Apple Screen Time
  - 緩解：差異化功能（積分系統）、本地化優勢

- **用戶接受度**：家長可能認為太複雜
  - 緩解：提供快速設定精靈、預設模板

### 營運風險
- **客服負擔**：技術支援需求大
  - 緩解：完善的說明文件、FAQ、社群互助

- **伺服器成本**：用戶增長導致成本上升
  - 緩解：優化架構、CDN、按需擴展

## 10. 未來增強功能

### 短期（6個月內）
- 網頁過濾功能
- 位置追蹤（到家自動解鎖）
- 群組任務（全家合作）
- 節日特別活動
- 備份與還原

### 中期（6-12個月）
- AI 行為分析
- 健康資料整合（步數、運動）
- 學校模式（上課自動限制）
- 家長社群論壇
- 遊戲化升級（寵物養成）

### 長期（12個月後）
- 智慧家居整合
- VR/AR 獎勵體驗
- 區塊鏈積分系統
- 跨家庭積分交換
- 教育內容平台

## 11. 驗收標準

### 功能完整性
- [ ] 所有核心功能正常運作
- [ ] 跨平台資料同步正確
- [ ] 通知系統即時準確
- [ ] 控制功能可靠有效

### 使用者體驗
- [ ] 介面直觀易用
- [ ] 操作流程順暢
- [ ] 錯誤處理優雅
- [ ] 效能達到要求

### 系統品質
- [ ] 無重大 Bug
- [ ] 資料安全可靠
- [ ] 系統穩定性 > 99.9%
- [ ] 符合隱私法規

## 更新歷史

- **v1.0** (2024-01-XX): 初始規格文件
- 待更新...

---

**文件狀態**：✅ 已完成初版
**最後更新**：2024-01-XX
**負責人**：開發團隊
**下次檢視**：Sprint 1 結束後